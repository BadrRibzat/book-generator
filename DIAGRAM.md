# ğŸ“ System Architecture Diagram

## High-Level Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BOOK GENERATOR SAAS                              â”‚
â”‚                     (100% Free - No Credit Card)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              USER JOURNEY                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  1. REGISTRATION/LOGIN                                                    â”‚
â”‚     â””â”€> POST /api/auth/register/                                         â”‚
â”‚                                                                           â”‚
â”‚  2. CHOOSE DOMAIN â†’ SUB-NICHE â†’ PAGE LENGTH                             â”‚
â”‚     â””â”€> GET /api/config/sub-niches/                                      â”‚
â”‚                                                                           â”‚
â”‚  3. CREATE BOOK (System Auto-Generates Title)                            â”‚
â”‚     â””â”€> POST /api/books/                                                 â”‚
â”‚         Status: draft â†’ generating                                       â”‚
â”‚                                                                           â”‚
â”‚  4. CONTENT GENERATION (30-40s)                                          â”‚
â”‚     â”œâ”€> Groq API (Llama 3.1 70B)                                        â”‚
â”‚     â”œâ”€> Generate chapters & content                                      â”‚
â”‚     â”œâ”€> Format with ReportLab                                            â”‚
â”‚     â””â”€> Store in MongoDB                                                 â”‚
â”‚         Status: generating â†’ content_generated                           â”‚
â”‚                                                                           â”‚
â”‚  5. COVER GENERATION (Auto-triggered, 10-15s)                           â”‚
â”‚     â”œâ”€> Generate 3 covers (Modern/Bold/Elegant)                         â”‚
â”‚     â”œâ”€> HTML/CSS â†’ PDF (WeasyPrint)                                     â”‚
â”‚     â””â”€> Convert to PNG previews                                          â”‚
â”‚         Status: content_generated â†’ cover_pending                        â”‚
â”‚                                                                           â”‚
â”‚  6. âš ï¸  MANDATORY COVER SELECTION                                        â”‚
â”‚     â””â”€> POST /api/books/{id}/select_cover/                              â”‚
â”‚         User MUST select one of 3 covers                                 â”‚
â”‚         Download BLOCKED until this step                                 â”‚
â”‚         Status: cover_pending â†’ ready                                    â”‚
â”‚                                                                           â”‚
â”‚  7. PDF ASSEMBLY                                                          â”‚
â”‚     â”œâ”€> Merge cover + interior                                           â”‚
â”‚     â””â”€> Create final downloadable PDF                                    â”‚
â”‚                                                                           â”‚
â”‚  8. âœ… DOWNLOAD ENABLED                                                  â”‚
â”‚     â””â”€> GET /api/books/{id}/download/                                    â”‚
â”‚         Returns: Complete book PDF                                       â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Tech Stack Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            FRONTEND (Future)                              â”‚
â”‚                                                                           â”‚
â”‚                    Vue 3 + TypeScript + DaisyUI                          â”‚
â”‚                    Deployed on: Vercel/Netlify                           â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â”‚ HTTPS/JSON
                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          BACKEND (Django)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     Django REST Framework                         â”‚   â”‚
â”‚  â”‚  - Session Authentication                                         â”‚   â”‚
â”‚  â”‚  - 12 API Endpoints                                              â”‚   â”‚
â”‚  â”‚  - Request Validation                                             â”‚   â”‚
â”‚  â”‚  - Error Handling                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Business Logic Layer                         â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Book Generator   â”‚  â”‚ Cover Generator  â”‚  â”‚  PDF Merger   â”‚ â”‚   â”‚
â”‚  â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚               â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Groq API      â”‚  â”‚ â€¢ HTML/CSS      â”‚  â”‚ â€¢ pypdf       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Title Gen     â”‚  â”‚ â€¢ WeasyPrint    â”‚  â”‚ â€¢ Merge       â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ Chapters      â”‚  â”‚ â€¢ 3 Styles      â”‚  â”‚ â€¢ Assemble    â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ ReportLab     â”‚  â”‚ â€¢ Niche Colors  â”‚  â”‚               â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      Django ORM Models                            â”‚   â”‚
â”‚  â”‚  - Book (metadata, status)                                       â”‚   â”‚
â”‚  â”‚  - Cover (3 per book, selection)                                 â”‚   â”‚
â”‚  â”‚  - User (auth)                                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                                â”‚
            â”‚                                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      â”‚        â”‚                         â”‚
â”‚   SQLite Database    â”‚        â”‚  MongoDB Atlas (FREE)   â”‚
â”‚      (Local)         â”‚        â”‚       (Cloud)           â”‚
â”‚                      â”‚        â”‚                         â”‚
â”‚  â€¢ User accounts     â”‚        â”‚  â€¢ Book content         â”‚
â”‚  â€¢ Book metadata     â”‚        â”‚  â€¢ Chapter text         â”‚
â”‚  â€¢ Cover records     â”‚        â”‚  â€¢ PDF paths            â”‚
â”‚  â€¢ Status tracking   â”‚        â”‚  â€¢ Generation data      â”‚
â”‚                      â”‚        â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## External Services (All FREE!)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        EXTERNAL SERVICES                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚   Groq API         â”‚    â”‚  MongoDB Atlas     â”‚                       â”‚
â”‚  â”‚   (LLM)            â”‚    â”‚  (Database)        â”‚                       â”‚
â”‚  â”‚                    â”‚    â”‚                    â”‚                       â”‚
â”‚  â”‚  â€¢ Llama 3.1 70B   â”‚    â”‚  â€¢ 512MB Free      â”‚                       â”‚
â”‚  â”‚  â€¢ Free tier       â”‚    â”‚  â€¢ Cloud hosted    â”‚                       â”‚
â”‚  â”‚  â€¢ 14,400 req/day  â”‚    â”‚  â€¢ Automatic scale â”‚                       â”‚
â”‚  â”‚  â€¢ No card needed  â”‚    â”‚  â€¢ No card needed  â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚              Deployment Platform (Choose One)                   â”‚     â”‚
â”‚  â”‚                                                                 â”‚     â”‚
â”‚  â”‚  â€¢ Railway.app     - 500 hrs/month free                        â”‚     â”‚
â”‚  â”‚  â€¢ Render.com      - 750 hrs/month free                        â”‚     â”‚
â”‚  â”‚  â€¢ Fly.io          - Generous free tier                        â”‚     â”‚
â”‚  â”‚  â€¢ PythonAnywhere  - Always-on free                            â”‚     â”‚
â”‚  â”‚                                                                 â”‚     â”‚
â”‚  â”‚  ALL: No credit card required initially                        â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 1. POST /api/books/ {"domain": "health", "sub_niche": "yoga_beginners"}
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Django API View â”‚ â”€â”€> Create Book record (status: "draft")
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 2. Trigger generation
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BookGenerator Serviceâ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 3. Call Groq API
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Groq LLM      â”‚ â”€â”€> Generate chapters (20-40s)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 4. Return content
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BookGenerator Serviceâ”‚ â”€â”€> Format with ReportLab â†’ interior.pdf
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 5. Save to MongoDB
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB    â”‚ â”€â”€> Store: {book_id, content, pdf_path}
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 6. Update Book status â†’ "content_generated"
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CoverGenerator Serviceâ”‚ â”€â”€> Auto-triggered
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 7. Generate 3 covers
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HTML â†’ CSS â†’ WeasyPrint â†’ PDF â†’ PNG (x3)      â”‚
â”‚                                                  â”‚
â”‚  â€¢ Modern style  (geometric, gradients)         â”‚
â”‚  â€¢ Bold style    (typography-focused)           â”‚
â”‚  â€¢ Elegant style (serif, borders)               â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 8. Save covers to filesystem
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cover Model â”‚ â”€â”€> Create 3 Cover records
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 9. Update Book status â†’ "cover_pending"
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER    â”‚ â”€â”€> GET /api/books/1/ (sees 3 covers)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 10. POST /api/books/1/select_cover/ {"cover_id": 1}
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cover Modelâ”‚ â”€â”€> Mark as selected
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 11. Trigger PDF merge
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PDFMerger Serviceâ”‚ â”€â”€> Load cover.pdf + interior.pdf
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 12. Merge with pypdf
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ final.pdf    â”‚ â”€â”€> Save to filesystem
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 13. Update MongoDB with final_pdf_path
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MongoDB    â”‚ â”€â”€> Update: {final_pdf_path: "books/book_1_final.pdf"}
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚ 14. Update Book status â†’ "ready"
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  USER    â”‚ â”€â”€> GET /api/books/1/download/
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚ 15. Serve final.pdf
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Download PDF â”‚ âœ… Complete book with cover!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SQLite (Django ORM)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                        Book Model                             â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚  id                    : Integer (PK)                         â”‚       â”‚
â”‚  â”‚  user_id               : ForeignKey â†’ User                    â”‚       â”‚
â”‚  â”‚  title                 : String (auto-generated)              â”‚       â”‚
â”‚  â”‚  domain                : Choice (health, food, ...)           â”‚       â”‚
â”‚  â”‚  sub_niche             : Choice (yoga_beginners, ...)         â”‚       â”‚
â”‚  â”‚  page_length           : Integer (15/20/25/30)                â”‚       â”‚
â”‚  â”‚  status                : Choice (draft/generating/...)        â”‚       â”‚
â”‚  â”‚  mongodb_id            : String (reference to MongoDB)        â”‚       â”‚
â”‚  â”‚  created_at            : DateTime                             â”‚       â”‚
â”‚  â”‚  updated_at            : DateTime                             â”‚       â”‚
â”‚  â”‚  content_generated_at  : DateTime                             â”‚       â”‚
â”‚  â”‚  completed_at          : DateTime                             â”‚       â”‚
â”‚  â”‚  error_message         : Text                                 â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚                        Cover Model                            â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚  id                    : Integer (PK)                         â”‚       â”‚
â”‚  â”‚  book_id               : ForeignKey â†’ Book                    â”‚       â”‚
â”‚  â”‚  template_style        : Choice (modern/bold/elegant)         â”‚       â”‚
â”‚  â”‚  image_path            : String (PNG preview)                 â”‚       â”‚
â”‚  â”‚  pdf_path              : String (PDF for merging)             â”‚       â”‚
â”‚  â”‚  is_selected           : Boolean                              â”‚       â”‚
â”‚  â”‚  generation_params     : JSON (colors, etc.)                  â”‚       â”‚
â”‚  â”‚  created_at            : DateTime                             â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        MongoDB (book_contents)                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  {                                                                        â”‚
â”‚    "_id": ObjectId("..."),                                               â”‚
â”‚    "book_id": 1,                                                         â”‚
â”‚    "content": {                                                          â”‚
â”‚      "chapters": [                                                       â”‚
â”‚        {                                                                 â”‚
â”‚          "title": "Chapter 1: Introduction to Yoga",                    â”‚
â”‚          "content": ["paragraph 1", "paragraph 2", ...]                 â”‚
â”‚        },                                                                â”‚
â”‚        { ... }                                                           â”‚
â”‚      ],                                                                  â”‚
â”‚      "total_chapters": 5                                                 â”‚
â”‚    },                                                                    â”‚
â”‚    "interior_pdf_path": "/path/to/book_1_interior.pdf",                 â”‚
â”‚    "final_pdf_path": "/path/to/book_1_final.pdf",                       â”‚
â”‚    "created_at": "2025-10-16T12:00:00Z"                                 â”‚
â”‚  }                                                                        â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File System Structure

```
media/
â”œâ”€â”€ books/
â”‚   â”œâ”€â”€ book_1_interior.pdf      â† Interior content only (LLM generated)
â”‚   â”œâ”€â”€ book_1_final.pdf         â† Final merged PDF (cover + interior)
â”‚   â”œâ”€â”€ book_2_interior.pdf
â”‚   â””â”€â”€ book_2_final.pdf
â”‚
â””â”€â”€ covers/
    â”œâ”€â”€ book_1_modern_1234.png   â† Web preview
    â”œâ”€â”€ book_1_modern_1234.pdf   â† For PDF merging
    â”œâ”€â”€ book_1_bold_5678.png
    â”œâ”€â”€ book_1_bold_5678.pdf
    â”œâ”€â”€ book_1_elegant_9012.png
    â”œâ”€â”€ book_1_elegant_9012.pdf
    â”œâ”€â”€ book_2_modern_3456.png
    â””â”€â”€ ...
```

## Status Flow Chart

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  draft  â”‚  â† Book created
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚
     â”‚ Start generation
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ generating  â”‚  â† Calling Groq API
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ Content ready
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ content_generated  â”‚  â† Interior PDF created
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ Auto-trigger cover generation
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ cover_pending   â”‚  âš ï¸  USER MUST SELECT COVER
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      Download BLOCKED
      â”‚
      â”‚ User selects cover
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ready   â”‚  âœ… Download ENABLED
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Cover Generation Detail

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Cover Generation Process                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

For each template style (Modern, Bold, Elegant):

  1. Get niche-specific colors
     â†“
     {
       primary: "#4A90E2",
       secondary: "#7ED321",
       accent: "#F8E71C"
     }

  2. Generate HTML template
     â†“
     <!DOCTYPE html>
     <html>
       <head>
         <style>
           body { background: linear-gradient(...); }
           .title { font-size: 120px; ... }
         </style>
       </head>
       <body>
         <h1 class="title">{{book_title}}</h1>
         <p class="category">{{category}}</p>
       </body>
     </html>

  3. Render to PDF (WeasyPrint)
     â†“
     6" x 9" PDF (print-ready size)

  4. Convert to PNG (for web preview)
     â†“
     600x900px preview image

  5. Save both files
     â†“
     â€¢ cover.pdf (for merging)
     â€¢ cover.png (for UI display)

  6. Create Cover record in database
     â†“
     Cover(book=book, style="modern", paths=...)

Repeat for all 3 styles!
```

## API Request/Response Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         API Example Flow                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

REQUEST:
POST /api/books/
{
  "domain": "health",
  "sub_niche": "yoga_beginners",
  "page_length": 15
}

RESPONSE (Immediate):
{
  "id": 1,
  "title": "The Complete Beginner's Guide to Yoga",
  "domain": "health",
  "sub_niche": "yoga_beginners",
  "page_length": 15,
  "status": "generating",
  "covers": [],
  "selected_cover": null,
  "can_download": false,
  "download_url": null,
  "created_at": "2025-10-16T12:00:00Z"
}

â”€â”€â”€ Wait 30-60 seconds â”€â”€â”€

REQUEST:
GET /api/books/1/

RESPONSE (After generation):
{
  "id": 1,
  "title": "The Complete Beginner's Guide to Yoga",
  "status": "cover_pending",
  "covers": [
    {
      "id": 1,
      "template_style": "modern",
      "image_url": "/media/covers/book_1_modern_1234.png",
      "is_selected": false
    },
    {
      "id": 2,
      "template_style": "bold",
      "image_url": "/media/covers/book_1_bold_5678.png",
      "is_selected": false
    },
    {
      "id": 3,
      "template_style": "elegant",
      "image_url": "/media/covers/book_1_elegant_9012.png",
      "is_selected": false
    }
  ],
  "can_download": false,  â† Still false!
  "download_url": null
}

REQUEST:
POST /api/books/1/select_cover/
{
  "cover_id": 1
}

RESPONSE:
{
  "id": 1,
  "status": "ready",  â† Now ready!
  "selected_cover": {
    "id": 1,
    "template_style": "modern",
    "is_selected": true
  },
  "can_download": true,  â† NOW true!
  "download_url": "/api/books/1/download/"
}

REQUEST:
GET /api/books/1/download/

RESPONSE:
Content-Type: application/pdf
Content-Disposition: attachment; filename="The Complete Beginner's Guide to Yoga.pdf"

[PDF Binary Data - Cover + 15 pages of content]
```

---

**This diagram shows the complete architecture of your book generator SaaS!**

All components are implemented and working. âœ…
